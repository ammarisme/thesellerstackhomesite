function SourceLocalStorageManager(){function e(){var e=getURLParameter("source");e&&(r.source=e,r.expiry=a+o,function(e){localStorage.setItem(t,JSON.stringify(e))}(r)),r.expiry<a&&localStorage.removeItem(t),null!=n()&&(i=n().source)}function n(){return JSON.parse(localStorage.getItem(t))}var t="source",o=2592e6,a=(new Date).getTime(),r=n()||{},i="";this.getSource=function(){return i},e()}$(function(){var e;if("/clover"===window.location.pathname&&(e="ecwid_clover",docCookies.setItem("partnerName",e,7776e3,"/",window.location.hostname)),"/pnc"===window.location.pathname&&(e="ecwid_pnc",docCookies.setItem("partnerName",e,7776e3,"/",window.location.hostname)),-1!==document.location.search.indexOf("partner=")){var n=document.location.search.split("partner=")[1].split("&")[0];/^[a-zA-Z0-9_-]{1,255}$/.test(n)&&docCookies.setItem("partnerName",n,null,"/",window.location.hostname)}window.location.search.indexOf("removePartnerName")>0&&docCookies.removeItem("partnerName","/",window.location.hostname),"undefined"!=typeof docCookies&&(e=docCookies.getItem("partnerName"));var t=(new SourceLocalStorageManager).getSource();e||docCookies.getItem("web_test_id")||docCookies.getItem("web_test_variant")||!t||(e=getPartnerBySource(t));var o=window.location.pathname;if(!["/clover","/pnc","/restaurant-offer","/es/restaurant-offer","/es/covid-19","/wordpress","/lloyds","/first-data","/victoria","/facebook-commerce","/instagram","/amazon","/mailchimp","/google-advertising","/sell-on-google","/pos","/subscriptions"].includes(o))if(e)changePartnerNameInRegistrationLink(e);else{var a=docCookies.getItem("userCountryCode");["NL","BE"].includes(a)?(e="ecwid_be_nl_signup_phone_test",docCookies.setItem("partnerName",e,null,"/",window.location.hostname),changePartnerNameInRegistrationLink(e)):"RU"==a?changePartnerNameInRegistrationLink("ecwid_rus2"):changeUTMInRegistrationLink()}});var changeRegistrationLink=function(e){var n=["partner","lang","source","utm_source","utm_campaign","utm_medium","utm_term","utm_content"],t=e.entireLink;$(".btn").each(function(){this.onclick=null;var o=$(this)[0].hasAttribute("href")?$(this).attr("href"):"";if(o.match(/^https:\/\/my.ecwid.com\/?(cp\/)?(\?(.*))?#(register.*)/)&&e)if(t)changeElementLink(this,t);else{var a=new URL(o),r=new URLSearchParams(a.search),i=!1;for(var c in e)n.includes(c)&&(r.set(c,e[c]),i=!0);i&&(a.search=r,changeElementLink(this,a.toString()))}})},changeElementLink=function(e,n){$(e).attr("href",n)},changePartnerNameInRegistrationLink=function(e){changeRegistrationLink({partner:e})},changeLangInRegistrationLink=function(e){changeRegistrationLink({lang:e})},changeUTMInRegistrationLink=function(){var e,n=["source","utm_source","utm_campaign","utm_medium","utm_term","utm_content"],t={};for(var o in n)(e=getURLParameter(n[o]))&&(t[n[o]]=e);Object.keys(t).length>0&&changeRegistrationLink(t)},getURLParameter=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null},getPartnerBySource=function(e){var n={facebook:"ec_facebook",fb:"ec_facebook",instagram:"ec_instagram",ig:"ec_instagram",square:"ec_pos",vend:"ec_pos",dropshipping:"ec_dropshipping",subscriptions:"ec_subscriptions"};if(!e)return"";for(var t in n)if(e.includes(t))return n[t];return""};